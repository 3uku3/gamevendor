(()=>{"use strict";const e=document.querySelector(".search__form"),t=document.querySelector(".popup"),c=document.querySelector(".add-card__button"),r=t.querySelector(".popup__close-button"),o=t.querySelector(".popup__container"),a=t.querySelectorAll(".popup__radio-item"),_=t.querySelector(".popup__input-text_type_name"),s=t.querySelector(".popup__input-text_type_link"),l=t.querySelector(".popup__input-text_type_description"),d=t.querySelector(".popup__input-text_type_old-price"),n=t.querySelector(".popup__input-text_type_new-price"),u=t.querySelectorAll(".popup__star"),i=t.querySelector(".popup__rating-radio"),p=document.querySelector("#template-card").content.querySelector(".card"),y=document.querySelector(".cards"),v=y.querySelectorAll(".card__link"),q=document.querySelector(".search__category"),m=document.querySelector(".search__category-dropdown"),S=q.querySelector(".search__select-icon"),L=document.querySelector(".search__sort"),h=document.querySelector(".search__sort-dropdown"),f=L.querySelector(".search__select-icon"),g=document.querySelectorAll(".faq__item");function E(e){e.forEach((e=>{e.classList.remove("popup__star_type_active"),e.classList.remove("popup__star_type_half")}))}function k(e){e.classList.remove("popup__opened")}e.addEventListener("submit",(e=>{e.preventDefault()})),o.addEventListener("submit",(e=>{e.preventDefault();const c=Array.from(t.querySelectorAll(".popup__rating-item")),r=c.find((e=>e.checked)).value,o=function(e,t,c,r,o,a,_){const s=p.cloneNode(!0),l=s.querySelector(".card__image"),d=s.querySelector(".card__title"),n=s.querySelector(".card__badge"),u=s.querySelector(".card__description"),i=s.querySelector(".card__old-price"),y=s.querySelector(".card__new-price"),v=s.querySelector(".card__sale"),q=s.querySelector(".card__link"),m=s.querySelectorAll(".card__star");return l.src=c.value,l.alt=t.value,d.textContent=t.value,e.forEach((e=>{e.checked&&(n.classList.add("card__badge_type_"+e.id),n.textContent=e.value)})),u.textContent=r.value,a.value&&(y.textContent="$"+a.value,o.value&&(i.textContent="$"+o.value,i.classList.add("card__old-price_active"),v.textContent="-"+Math.round(parseInt(a.value)/parseInt(o.value)*100)+"%",v.classList.add("card__sale_active"))),m.forEach(((e,t)=>{t<Math.floor(_/2)?e.classList.add("card__star_type_active"):_%2==1&&t==Math.floor(_/2)&&e.classList.add("card__star_type_half")})),q.addEventListener("mouseenter",(()=>{q.querySelector(".card__close").classList.add("card__close_opened")})),q.addEventListener("mouseleave",(()=>{q.querySelector(".card__close").classList.remove("card__close_opened")})),s}(a,_,s,l,d,n,r),i=y.querySelector(".card");c[0].checked=!0,E(u),_.value="",s.value="",l.value="",d.value="",n.value="",y.insertBefore(o,i),k(t)})),i.addEventListener("click",(()=>{const e=Array.from(t.querySelectorAll(".popup__rating-item")).find((e=>e.checked)).value;var c,r;c=e,E(r=u),r.forEach(((e,t)=>{t<Math.floor(c/2)?e.classList.add("popup__star_type_active"):c%2==1&&t==Math.floor(c/2)&&e.classList.add("popup__star_type_half")}))})),c.addEventListener("click",(()=>{!function(e){e.classList.add("popup__opened")}(t)})),r.addEventListener("click",(()=>{k(t)})),q.addEventListener("click",(()=>{S.classList.toggle("search__select-icon_active"),m.classList.toggle("dropdown__items_opened")})),document.addEventListener("click",(e=>{let t=e.composedPath().includes(m),c=e.composedPath().includes(q);t||c||(S.classList.remove("search__select-icon_active"),m.classList.remove("dropdown__items_opened")),t=e.composedPath().includes(h),c=e.composedPath().includes(L),t||c||(f.classList.remove("search__select-icon_active"),h.classList.remove("dropdown__items_opened"))})),L.addEventListener("click",(()=>{f.classList.toggle("search__select-icon_active"),h.classList.toggle("dropdown__items_opened")})),v.forEach((e=>{e.addEventListener("mouseenter",(()=>{e.querySelector(".card__close").classList.add("card__close_opened")})),e.addEventListener("mouseleave",(()=>{e.querySelector(".card__close").classList.remove("card__close_opened")}))})),g.forEach((e=>{const t=e.querySelector(".faq__button"),c=e.querySelector(".faq__content");t.addEventListener("click",(()=>{t.classList.toggle("faq__button_active"),c.classList.toggle("faq__content_active")}))}))})();